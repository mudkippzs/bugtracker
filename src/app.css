@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
	* {
		@apply border-void-50;
	}

	html {
		font-size: 15px;
		transition: background-color 0.2s ease, color 0.2s ease;
	}

	/* Dark mode (default) */
	body {
		@apply antialiased bg-void text-ghost font-mono;
		background-image: 
			linear-gradient(rgba(0, 240, 255, 0.02) 1px, transparent 1px),
			linear-gradient(90deg, rgba(0, 240, 255, 0.02) 1px, transparent 1px);
		background-size: 24px 24px;
		transition: background-color 0.2s ease, color 0.2s ease;
	}

	/* Light mode overrides */
	html.light body {
		background-color: #f8fafc;
		color: #334155;
		background-image: 
			linear-gradient(rgba(0, 150, 180, 0.06) 1px, transparent 1px),
			linear-gradient(90deg, rgba(0, 150, 180, 0.06) 1px, transparent 1px);
	}

	html.light * {
		border-color: #e2e8f0;
	}

	/* Custom scrollbar - minimal */
	::-webkit-scrollbar {
		@apply w-1.5 h-1.5;
	}

	::-webkit-scrollbar-track {
		@apply bg-transparent;
	}

	::-webkit-scrollbar-thumb {
		@apply bg-void-50 rounded-full;
	}

	::-webkit-scrollbar-thumb:hover {
		@apply bg-cyber-dim;
	}

	/* Selection */
	::selection {
		@apply bg-cyber/30 text-ghost-bright;
	}
}

@layer components {
	/* Buttons - clean, sharp */
	.btn {
		@apply px-3 py-1.5 text-xs font-medium transition-all duration-150 
			   flex items-center gap-2 border uppercase tracking-wider;
	}

	.btn-primary {
		@apply bg-cyber-muted border-cyber-dim text-cyber 
			   hover:bg-cyber/20 hover:border-cyber hover:shadow-glow-cyan-sm;
	}

	.btn-secondary {
		@apply bg-void-50 border-ghost-dim/30 text-ghost 
			   hover:border-ghost-dim hover:text-ghost-bright;
	}

	.btn-ghost {
		@apply border-transparent text-ghost-dim hover:text-ghost hover:bg-void-50;
	}

	.btn-danger {
		@apply bg-priority-critical/10 border-priority-critical/50 text-priority-critical
			   hover:bg-priority-critical/20 hover:border-priority-critical;
	}

	/* Cards - terminal panels */
	.card {
		@apply bg-void-100/80 border border-void-50 p-4 backdrop-blur-sm;
	}

	.card-hover {
		@apply card hover:border-cyber-dim/50 hover:shadow-glow-cyan-sm 
			   transition-all duration-150 cursor-pointer;
	}

	.card-glow {
		@apply card border-cyber/30 shadow-glow-cyan-sm;
	}

	/* Inputs - terminal style */
	.input {
		@apply w-full px-3 py-2 bg-void-200 border border-void-50 
			   text-ghost-bright placeholder-ghost-dim text-sm
			   focus:outline-none focus:border-cyber-dim focus:shadow-glow-cyan-sm
			   transition-all duration-150 font-mono;
	}

	.input-sm {
		@apply input px-2.5 py-1.5 text-xs;
	}

	.label {
		@apply block text-xs font-medium text-ghost-dim mb-1.5 uppercase tracking-wider;
	}

	/* Badges - compact, no rounded */
	.badge {
		@apply inline-flex items-center px-2 py-0.5 text-xs font-medium uppercase tracking-wide border;
	}

	.badge-priority-critical {
		@apply bg-priority-critical/10 text-priority-critical border-priority-critical/30;
	}

	.badge-priority-high {
		@apply bg-priority-high/10 text-priority-high border-priority-high/30;
	}

	.badge-priority-medium {
		@apply bg-priority-medium/10 text-priority-medium border-priority-medium/30;
	}

	.badge-priority-low {
		@apply bg-priority-low/10 text-priority-low border-priority-low/30;
	}

	.badge-status-backlog {
		@apply bg-status-backlog/10 text-status-backlog border-status-backlog/30;
	}

	.badge-status-todo {
		@apply bg-status-todo/10 text-status-todo border-status-todo/30;
	}

	.badge-status-in_progress {
		@apply bg-status-in_progress/10 text-status-in_progress border-status-in_progress/30;
	}

	.badge-status-review {
		@apply bg-status-review/10 text-status-review border-status-review/30;
	}

	.badge-status-done {
		@apply bg-status-done/10 text-status-done border-status-done/30;
	}

	.badge-status-closed {
		@apply bg-ghost-dim/10 text-ghost-dim border-ghost-dim/30;
	}

	.badge-type {
		@apply bg-void-50 text-ghost border-void-50;
	}

	/* NEW badge for unread items */
	.badge-new {
		@apply inline-flex items-center px-1.5 py-0.5 font-bold uppercase tracking-wide;
		background: linear-gradient(135deg, rgba(0, 240, 255, 0.2), rgba(0, 255, 159, 0.2));
		color: #00f0ff;
		border: 1px solid rgba(0, 240, 255, 0.5);
		text-shadow: 0 0 8px rgba(0, 240, 255, 0.5);
	}

	/* Status-based tints for issue cards (transparent for light/dark mode compatibility) */
	.status-tint-backlog {
		background-color: rgba(74, 82, 96, 0.05);
		border-left: 2px solid rgba(74, 82, 96, 0.5);
	}

	.status-tint-todo {
		background-color: rgba(0, 160, 255, 0.05);
		border-left: 2px solid rgba(0, 160, 255, 0.5);
	}

	.status-tint-in_progress {
		background-color: rgba(168, 85, 247, 0.08);
		border-left: 2px solid rgba(168, 85, 247, 0.6);
	}

	.status-tint-review {
		background-color: rgba(240, 192, 32, 0.06);
		border-left: 2px solid rgba(240, 192, 32, 0.5);
	}

	.status-tint-done {
		background-color: rgba(0, 255, 159, 0.06);
		border-left: 2px solid rgba(0, 255, 159, 0.5);
	}

	.status-tint-closed {
		background-color: rgba(74, 82, 96, 0.05);
		border-left: 2px solid rgba(74, 82, 96, 0.4);
	}

	/* Terminal text effects */
	.text-glow {
		text-shadow: 0 0 10px currentColor;
	}

	.glow-cyber {
		color: theme('colors.cyber.DEFAULT');
		text-shadow: 0 0 10px theme('colors.cyber.DEFAULT');
	}

	.glow-matrix {
		color: theme('colors.matrix.DEFAULT');
		text-shadow: 0 0 10px theme('colors.matrix.DEFAULT');
	}

	/* Markdown content - terminal style */
	.markdown-content {
		@apply text-ghost text-sm leading-relaxed;
	}

	.markdown-content h1 {
		@apply text-lg font-bold text-cyber mb-2 mt-4 border-b border-void-50 pb-1;
	}

	.markdown-content h2 {
		@apply text-base font-semibold text-ghost-bright mb-2 mt-3;
	}

	.markdown-content h3 {
		@apply text-sm font-medium text-ghost-bright mb-1 mt-2;
	}

	.markdown-content p {
		@apply my-2;
	}

	.markdown-content ul, .markdown-content ol {
		@apply my-2 pl-4;
	}

	.markdown-content ul {
		list-style-type: '› ';
	}

	.markdown-content ol {
		@apply list-decimal;
	}

	.markdown-content li {
		@apply my-0.5;
	}

	.markdown-content code {
		@apply bg-void-200 px-1 py-0.5 text-cyber text-xs;
	}

	.markdown-content pre {
		@apply bg-void-200 p-2 overflow-x-auto my-2 border-l-2 border-cyber-dim;
	}

	.markdown-content pre code {
		@apply bg-transparent p-0 text-ghost;
	}

	.markdown-content blockquote {
		@apply border-l-2 border-cyber-dim/50 pl-3 my-2 text-ghost-dim italic;
	}

	.markdown-content a {
		@apply text-cyber hover:text-cyber underline decoration-cyber/30 hover:decoration-cyber;
	}

	.markdown-content hr {
		@apply my-3 border-void-50;
	}

	.markdown-content table {
		@apply w-full my-2 text-xs;
	}

	.markdown-content th, .markdown-content td {
		@apply border border-void-50 px-2 py-1 text-left;
	}

	.markdown-content th {
		@apply bg-void-200 text-ghost-bright uppercase text-2xs tracking-wider;
	}

	/* Scanline overlay effect */
	.scanlines::after {
		content: '';
		@apply pointer-events-none fixed inset-0 z-50;
		background: repeating-linear-gradient(
			0deg,
			rgba(0, 0, 0, 0.1) 0px,
			rgba(0, 0, 0, 0.1) 1px,
			transparent 1px,
			transparent 2px
		);
	}

	/* Terminal cursor */
	.cursor-blink::after {
		content: '▋';
		@apply text-cyber animate-blink ml-0.5;
	}

	/* Status indicator */
	.status-dot {
		@apply w-1.5 h-1.5 rounded-full;
	}

	.status-dot-online {
		@apply bg-matrix shadow-glow-matrix;
	}

	.status-dot-offline {
		@apply bg-ghost-dim;
	}

	/* Panel headers */
	.panel-header {
		@apply text-xs uppercase tracking-widest text-ghost-dim border-b border-void-50 pb-2 mb-3 flex items-center gap-2;
	}

	.panel-header::before {
		content: '//';
		@apply text-cyber-dim;
	}
}

@layer utilities {
	.text-balance {
		text-wrap: balance;
	}

	.animate-fade-in {
		animation: fadeIn 0.15s ease-out;
	}

	.animate-slide-up {
		animation: slideUp 0.2s ease-out;
	}

	@keyframes fadeIn {
		from { opacity: 0; }
		to { opacity: 1; }
	}

	@keyframes slideUp {
		from { opacity: 0; transform: translateY(5px); }
		to { opacity: 1; transform: translateY(0); }
	}

	@keyframes flash {
		0%, 100% { opacity: 1; }
		50% { opacity: 0.5; }
	}

	.animate-flash {
		animation: flash 0.4s ease-in-out 3;
	}

	/* New comment flash animation */
	@keyframes newComment {
		0% { 
			background-color: rgba(0, 240, 255, 0.3);
			border-color: rgba(0, 240, 255, 0.8);
			box-shadow: 0 0 20px rgba(0, 240, 255, 0.4);
		}
		100% { 
			background-color: transparent;
			border-color: var(--border-color, rgba(255, 255, 255, 0.1));
			box-shadow: none;
		}
	}

	.animate-new-comment {
		animation: newComment 2s ease-out forwards;
	}

	/* Gradient border effect */
	.border-gradient {
		border-image: linear-gradient(135deg, theme('colors.cyber.DEFAULT'), theme('colors.matrix.DEFAULT')) 1;
	}
}

/* ============================================
   LIGHT MODE OVERRIDES
   ============================================ */

/* Light mode color variables */
html.light {
	--light-bg: #f8fafc;
	--light-bg-secondary: #f1f5f9;
	--light-bg-tertiary: #e2e8f0;
	--light-text: #334155;
	--light-text-dim: #64748b;
	--light-text-bright: #0f172a;
	--light-border: #e2e8f0;
	--light-accent: #0891b2;
	--light-accent-dim: #06b6d4;
}

/* Sidebar */
html.light aside {
	background-color: #f1f5f9;
	border-color: #e2e8f0;
}

/* Cards */
html.light .card {
	background-color: #ffffff;
	border-color: #e2e8f0;
}

html.light .card-hover:hover {
	border-color: #0891b2;
	box-shadow: 0 0 15px rgba(8, 145, 178, 0.1);
}

/* Inputs */
html.light .input,
html.light .input-sm {
	background-color: #ffffff;
	border-color: #e2e8f0;
	color: #0f172a;
}

html.light .input::placeholder {
	color: #94a3b8;
}

html.light .input:focus {
	border-color: #0891b2;
	box-shadow: 0 0 10px rgba(8, 145, 178, 0.15);
}

/* Buttons */
html.light .btn-primary {
	background-color: #ecfeff;
	border-color: #0891b2;
	color: #0891b2;
}

html.light .btn-primary:hover {
	background-color: #cffafe;
}

html.light .btn-secondary {
	background-color: #f1f5f9;
	border-color: #cbd5e1;
	color: #475569;
}

html.light .btn-secondary:hover {
	border-color: #94a3b8;
	color: #1e293b;
}

html.light .btn-ghost {
	color: #64748b;
}

html.light .btn-ghost:hover {
	background-color: #f1f5f9;
	color: #334155;
}

/* Text colors */
html.light .text-ghost {
	color: #475569;
}

html.light .text-ghost-bright {
	color: #0f172a;
}

html.light .text-ghost-dim {
	color: #94a3b8;
}

html.light .text-cyber {
	color: #0891b2;
}

/* Badges */
html.light .badge-type {
	background-color: #f1f5f9;
	color: #475569;
	border-color: #e2e8f0;
}

/* Panel headers */
html.light .panel-header {
	border-color: #e2e8f0;
	color: #64748b;
}

html.light .panel-header::before {
	color: #0891b2;
}

/* Scrollbars */
html.light ::-webkit-scrollbar-thumb {
	background-color: #cbd5e1;
}

html.light ::-webkit-scrollbar-thumb:hover {
	background-color: #0891b2;
}

/* Selection */
html.light ::selection {
	background-color: rgba(8, 145, 178, 0.2);
	color: #0f172a;
}

/* Status indicators */
html.light .status-dot-online {
	background-color: #10b981;
	box-shadow: 0 0 8px rgba(16, 185, 129, 0.4);
}

html.light .status-dot-offline {
	background-color: #94a3b8;
}

/* Markdown content */
html.light .markdown-content {
	color: #475569;
}

html.light .markdown-content h1 {
	color: #0891b2;
	border-color: #e2e8f0;
}

html.light .markdown-content h2,
html.light .markdown-content h3 {
	color: #0f172a;
}

html.light .markdown-content code {
	background-color: #f1f5f9;
	color: #0891b2;
}

html.light .markdown-content pre {
	background-color: #f1f5f9;
	border-color: #0891b2;
}

html.light .markdown-content pre code {
	color: #334155;
}

html.light .markdown-content blockquote {
	border-color: rgba(8, 145, 178, 0.3);
	color: #64748b;
}

html.light .markdown-content a {
	color: #0891b2;
}

/* Tables */
html.light .markdown-content th {
	background-color: #f1f5f9;
	color: #0f172a;
}

/* Void backgrounds in light mode */
html.light .bg-void,
html.light .bg-void-50,
html.light .bg-void-100,
html.light .bg-void-200 {
	background-color: #f8fafc;
}

html.light .bg-void-50 {
	background-color: #f1f5f9;
}

html.light .bg-void-100 {
	background-color: #ffffff;
}

html.light .bg-void-200 {
	background-color: #f1f5f9;
}

/* Status tints in light mode */
html.light .status-tint-backlog {
	background-color: rgba(100, 116, 139, 0.06);
	border-left-color: rgba(100, 116, 139, 0.4);
}

html.light .status-tint-todo {
	background-color: rgba(8, 145, 178, 0.06);
	border-left-color: rgba(8, 145, 178, 0.5);
}

html.light .status-tint-in_progress {
	background-color: rgba(168, 85, 247, 0.08);
	border-left-color: rgba(168, 85, 247, 0.5);
}

html.light .status-tint-review {
	background-color: rgba(245, 158, 11, 0.08);
	border-left-color: rgba(245, 158, 11, 0.5);
}

html.light .status-tint-done {
	background-color: rgba(16, 185, 129, 0.08);
	border-left-color: rgba(16, 185, 129, 0.5);
}

html.light .status-tint-closed {
	background-color: rgba(100, 116, 139, 0.06);
	border-left-color: rgba(100, 116, 139, 0.3);
}
